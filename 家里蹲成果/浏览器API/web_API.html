<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      h3 {
        background-color: rgb(108, 191, 192);
      }
      #d1 {
        background-color: rgb(198, 164, 164);
      }
      #d2 {
        background-color: rgb(179, 181, 150);
      }
      #d3 {
        background-color: rgb(171, 198, 164);
      }
      #d4 {
        background-color: rgb(164, 167, 198);
      }
    </style>
  </head>
  <body>
    <div id="d1">
      <h3>demo1</h3>
      è¾“å…¥æ•°å­—:<input type="number" id="ipt" min="5" max="100" required />
      <button id="btn">æ•°å­—æ˜¯å¦æ˜¯5-100</button><br />
      <p id="p">æ˜¾ç¤ºcheckValidityç»“æœ</p>
    </div>
    <div id="d2">
      <h3>demo2</h3>
      <button id="btn2">ç‚¹å‡»åé€€ä¸€é¡µ</button>
      <button id="btn2_1">ç‚¹å‡»æˆ‘åé€€ä¸¤é¡µ</button>
      <button id="btn2_2">ç‚¹å‡»æˆ‘å‰è¿›ä¸€é¡µ</button>
    </div>
    <div id="d3">
      <h3>demo3</h3>
      <p>è‡ªå¢çš„æ•°å­—: <output id="result"></output></p>
      <button id="btn3_1">Workerè„šæœ¬å¼€å§‹è¿è¡Œ</button>
      <button id="btn3_2">Workerè„šæœ¬åœæ­¢è¿è¡Œ</button>
    </div>
    <div id="d4">
      <h3>demo4</h3>
      <p id="fetch">æ˜¾ç¤ºè¯·æ±‚çš„æ•°æ®</p>
    </div>
    <script>
      // web API,webçš„åº”ç”¨ç¨‹åºæ¥å£
      // æµè§ˆå™¨apiå¯ä»¥æ‰©å±•webæµè§ˆå™¨çš„åŠŸèƒ½,æœåŠ¡å™¨apiå¯ä»¥æ‰©å±•webæœåŠ¡å™¨çš„åŠŸèƒ½
      //   api:å°±æ˜¯åˆ«äººå°è£…å¥½çš„å‡½æ•°,ç›´æ¥æ‹¿æ¥è°ƒç”¨å°±è¡Œäº†,æœ€ç®€å•çš„api(console,alert)

      //   æ„Ÿè§‰ä¸å¥½ç”¨,ä¸å¦‚è‡ªå·±å†™åˆ¤æ–­,æ›´åŠ çµæ´»
      (function è¡¨å•éªŒè¯() {
        // checkValidity å¦‚æœinputçš„valueç¬¦åˆè¦æ±‚,è¿”å›true
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          if (ipt.checkValidity()) {
            p.innerText = "æ­£ç¡®";
          } else {
            p.innerText = "é”™è¯¯";
          }
          setTimeout(() => {
            ipt.value = "";
            p.innerText = "å†æ¥ä¸€æ¬¡å§";
          }, 1000);
        });
      })();
      (function æµè§ˆå™¨å†å²è®°å½•() {
        btn2.addEventListener("click", () => {
          // å†å²åé€€,ç›¸å½“äºç‚¹å‡»â†,ä¸åˆ·æ–°ç¦»å¼€é¡µ
          window.history.back();
        });
        btn2_1.addEventListener("click", () => {
          // history.go
          // åé€€ä¸¤é¡µ,å¹¶åˆ·æ–°ç¦»å¼€é¡µ
          window.history.go(-2);
        });
        // åŸç”Ÿå†™ä¸€ä¸ª,åˆ«å¿˜äº†
        btn2_2.onclick = function () {
          // å‰è¿›ä¸€é¡µ
          window.history.forward();
        };
        // historyåŸºæœ¬å±æ€§,é‡Œé¢æœ‰length,è¡¨ç¤ºå†å²è®°å½•å­˜åœ¨å¤šå°‘ä¸ªurl,å…¶ä»–çš„è‡ªå·±çœ‹å»
        console.log(history);
      })();
      (function æµè§ˆå™¨å­˜å‚¨() {
        // å®ƒä¸¤ä¸€ä¸ªå­˜æœ¬åœ°æ•°æ®,ä¸€ä¸ªå­˜ä¼šè¯æ•°æ®,éƒ½åªèƒ½å­˜5m
        // localStorage,å“ˆå“ˆ,è€ç†Ÿäººäº†
        // å­˜ä¸€äº›æœ¬åœ°æ•°æ®,å®ƒæ²¡æœ‰è¿‡æœŸæ—¶é—´
        // å¢/æ”¹
        localStorage.setItem("userName", "å§šç£Š");
        //   æŸ¥
        let userName = localStorage.getItem("userName");
        console.log(userName);
        //   åˆ 
        localStorage.removeItem("userName");
        // æ¸…ç©º
        // localStorage.clear()

        //   sessionStorage
        //  å­˜ä¸€äº›ä¼šè¯æ•°æ®,æµè§ˆå™¨å…³é—­,å°±æ²¡äº†
        // å¢/æ”¹
        sessionStorage.setItem("time", "2022-09-23");
        // æŸ¥
        let time = sessionStorage.getItem("time");
        console.log(time);
      })();

      // web worker
      // é¡µé¢éœ€è¦åŠ è½½å®Œhtmlå’Œjsæ–‡ä»¶,æ‰èƒ½å‘ˆç°å‡ºæ¥
      // ä½†æ˜¯,web workeræ˜¯åœ¨åå°è¿è¡Œçš„js,ä¸å½±å“å…¶ä»–çš„è¿›ç¨‹
      (function workeræ˜¯åå°çš„js() {
        // é¦–å…ˆ,åˆ¤æ–­workeræ˜¯å¦å¯ç”¨
        console.dir(Worker);
        // çœŸæ­£å¼€å‘è‚¯å®šä¸èƒ½è¿™æ ·,ä¸‹é¢æ¥ä¸ªå®Œç¾å†™æ³•
        if (typeof Worker !== "undefined") {
          console.log("å¯ä»¥ç”¨worker");
        }
      })();

      (function workerçš„ç”¨æ³•å¤åˆ¶() {
        let w;

        btn3_1.onclick = () => {
          // åˆ¤æ–­workeråœ¨æµè§ˆå™¨æ˜¯å¦å¯ç”¨
          if (typeof w == "undefined") {
            // åˆ›å»º,å¹¶è¿è¡Œjsè„šæœ¬
            w = new Worker("demo_worker.js");
          }
          //   æ¥æ”¶ä¿¡æ¯äº‹ä»¶
          w.onmessage = function (e) {
            // jsè„šæœ¬å‘é€çš„æ•°æ®åœ¨dataä¸­
            result.innerHTML = e.data;
          };
        };
        // åœæ­¢worker
        btn3_2.onclick = () => {
          // åœæ­¢worker
          w.terminate();
          //   å°†workerå¯¹è±¡è®¾undefined
          w = undefined;
        };
      })();
      //   ä»¥ä¸‹éƒ½æ˜¯fetchçš„å°æ‰“å°é—¹,æœ‰æœºä¼šæŠŠajax,axios,XMLHttpRequest,fetchä¸€èµ·è®²ä¸€ä¸‹,æ•¬è¯·æœŸå¾…
      //  Fetchå…è®¸æµè§ˆå™¨ç›´æ¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚
      //  fetchæ˜¯åŸºäºasync,awaitçš„,ä»–ä¹Ÿæ˜¯ä¸ªpromise,æ‰€ä»¥å¯ä»¥ç”¨awaitå»å¾—åˆ°è¿”å›å€¼
      // ä¸å†éœ€è¦XMLHttpRequest
      (function Fetchè¯·æ±‚() {
        // æŠŠæ–‡ä»¶åè–…è¿‡æ¥
        let file = "Fetchçš„æ•°æ®åº“.js";
        (function ä¸€èˆ¬å†™æ³•() {
          // è¯·æ±‚æˆåŠŸäº†,ä½†æ˜¯
          // æ•°æ®åº“æ ¼å¼ä¸å¯¹,æ‹¿ä¸åˆ°æ•°æ®....ğŸ˜…
          fetch(file).then((f) => {
            // fè¿”å›è¯·æ±‚ä½“
            console.log(f);
          });
        })();
        (async function è£…é€¼å†™æ³•() {
          // fetchæ˜¯ä¸€ä¸ªpromise,å¯ä»¥ç”¨awaitæ‹¿åˆ°è¿™ä¸ªpromiseè¾“å‡ºçš„æ•°æ®
          let data = await fetch(file);
          console.log(data);
        })();
        // è¿™ä¸¤ä¸ªä¾‹å­éƒ½åªå¤„ç†äº†ä¸€æ¬¡,æ‹¿åˆ°çš„æ˜¯è¯·æ±‚ä½“,ä¸€èˆ¬ä¼šdata.xxxå†thenæˆ–è€…awaitä¸€æ¬¡,æ‹¿åˆ°çœŸæ­£éœ€è¦çš„æ•°æ®,è€Œä¸”fetchçœŸæ­£çš„å†™æ³•å’Œaxioså¾ˆåƒ,ä¸æ˜¯è¿™ä¹ˆç®€å•çš„,æ‰€ä»¥,è¿™ä¸ªçœ‹çœ‹å°±è¡Œäº†
      }); //()åˆ«å¿˜äº†åŠ 

      (function è·å–ç”¨æˆ·çš„åœ°ç†ä½ç½®() {
        // å…ˆæŸ¥çœ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ
        if (navigator.geolocation) {
          console.log("æ”¯æŒè®¿é—®åœ°ç†ä½ç½®");
          // è™½ç„¶æ”¯æŒ,ä½†æ˜¯æ ¹æœ¬æ²¡ä¸œè¥¿
          console.log(navigator.geolocation);
          // è¿™ä¸ªæ–¹æ³•å¯ä»¥å¾—åˆ°ç”¨æˆ·çš„ä½ç½®çš„ç»çº¬åº¦,æµ·æ‹”,ç§»åŠ¨é€Ÿåº¦
          navigator.geolocation.getCurrentPosition((position) => {
            console.log(position.coords);
            //   position.coords.latitudeè¿”å›çº¬åº¦
            //   position.coords.longitudeè¿”å›ç»åº¦
          });
        }
      })();
      const x = document.getElementById("demo");
    </script>
  </body>
</html>
